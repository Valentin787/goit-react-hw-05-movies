{"version":3,"sources":["pages/MovieDetailsPage.jsx"],"names":["Cast","lazy","Reviews","MovieDetailsPage","history","useHistory","location","useLocation","movieId","useParams","useState","film","setFilm","cast","setCast","reviews","setReviews","url","useRouteMatch","useEffect","fetchId","then","data","catch","error","fetchCast","fetchReviews","results","className","s","buttonBack","type","onClick","push","state","from","filmWrap","filmImg","width","src","poster_path","alt","original_title","filmOverview","filmTitleOverview","scoreTitle","Math","round","vote_average","overviewTitle","overviewText","overview","genresTitle","genres","map","index","id","name","textGenres","aditionalTitle","aditionalWrap","castTitle","to","pathname","reviewsTitle","fallback","height","color","ariaLabel","path"],"mappings":"iOASMA,EAAOC,gBAAK,kBAAM,gCAClBC,EAAUD,gBAAK,kBAAM,gCAsGZE,UAlGU,WAAO,IAAD,QACvBC,EAAUC,cACVC,EAAWC,cACVC,EAAWC,cAAXD,QAHsB,EAILE,mBAAS,MAJJ,mBAItBC,EAJsB,KAIhBC,EAJgB,OAKLF,mBAAS,MALJ,mBAKtBG,EALsB,KAKhBC,EALgB,OAMCJ,mBAAS,MANV,mBAMtBK,EANsB,KAMbC,EANa,KAStBC,EAAOC,cAAPD,IAGPE,qBAAU,WACRC,YAAQZ,GAASa,MAAK,SAAAC,GAAI,OAAIV,EAAQU,MAAOC,OAAM,SAAAC,GAAK,MAAI,aAC5D,CAAChB,IAEHW,qBAAU,WACRM,YAAUjB,GAASa,MAAK,SAAAC,GAAI,OAAIR,EAAQQ,EAAKT,SAAOU,OAAM,SAAAC,GAAK,MAAI,aAClE,CAAChB,IAEHW,qBAAU,WACTO,YAAalB,GAASa,MAAK,SAAAC,GAAI,OAAIN,EAAWM,EAAKK,YAAUJ,OAAM,SAAAC,GAAK,MAAI,aAC3E,CAAChB,IAgBJ,OAAOG,EACL,qCACA,wBAAQiB,UAAWC,IAAEC,WAAYC,KAAK,SAASC,QAf3B,WAAO,IAAD,IAMzB5B,EAAQ6B,KAAR,iBAAa3B,QAAb,IAAaA,GAAb,UAAaA,EAAU4B,aAAvB,aAAa,EAAiBC,YAA9B,QAAsC,MASvC,2BAIA,sBAAKP,UAAWC,IAAEO,SAAlB,UACI,qBAAKR,UAAWC,IAAEQ,QAASC,MAAM,MAAMC,IArCxB,kCAqC4C5B,EAAK6B,YAAaC,IAAK9B,EAAK+B,iBACzF,qBAAId,UAAWC,IAAEc,aAAjB,UACI,6BAAI,oBAAIf,UAAWC,IAAEe,kBAAjB,SAAqCjC,EAAK+B,mBAC9C,uBACA,6BACA,oBAAGd,UAAWC,IAAEgB,WAAhB,wBAAwC,IAC1C,iCAAOC,KAAKC,MAAOpC,EAAKqC,aAAe,GAAM,KAA7C,YAGE,uBACA,6BAAI,oBAAIpB,UAAWC,IAAEoB,cAAjB,wBAEJ,oBAAIrB,UAAWC,IAAEqB,aAAjB,SAAgCvC,EAAKwC,WACrC,uBACA,6BAAI,oBAAIvB,UAAWC,IAAEuB,YAAjB,sBAEHzC,EAAK0C,OAAOC,KAAI,WAAWC,GAAW,IAApBC,EAAmB,EAAnBA,GAAGC,EAAgB,EAAhBA,KACpB,OAAO,oBAAI7B,UAAWC,IAAE6B,WAAjB,sBACED,IADgCD,MAI3C,6BAGJ,oBAAI5B,UAAWC,IAAE8B,eAAjB,mCACA,sBAAK/B,UAAWC,IAAE+B,cAAlB,UAEE,cAAC,IAAD,CAAMhC,UAAWC,IAAEgC,UAAWC,GAAI,CAChCC,SAAS,GAAD,OAAK9C,EAAL,SACRiB,MAAO,CAAEC,KAAI,iBAAE7B,QAAF,IAAEA,GAAF,UAAEA,EAAU4B,aAAZ,aAAE,EAAiBC,YAAnB,QAA2B,MAF1C,kBAIA,cAAC,IAAD,CAAMP,UAAWC,IAAEmC,aAAcF,GAAI,CACnCC,SAAS,GAAD,OAAK9C,EAAL,YACRiB,MAAO,CAAEC,KAAI,iBAAE7B,QAAF,IAAEA,GAAF,UAAEA,EAAU4B,aAAZ,aAAE,EAAiBC,YAAnB,QAA2B,MAF1C,qBAIA,eAAC,WAAD,CAAU8B,SAAU,cAAC,IAAD,CACpBC,OAAO,MACP5B,MAAM,MACN6B,MAAM,mBACNC,UAAU,YAJV,UAMA,cAAC,IAAD,CAAOC,KAAMpD,EAAM,QAAnB,SACE,cAACjB,EAAD,CAAMa,KAAMA,MAEd,cAAC,IAAD,CAAOwD,KAAMpD,EAAM,WAAnB,SACE,cAACf,EAAD,CAASa,QAASA,eAKvB","file":"static/js/8.db7d4383.chunk.js","sourcesContent":["import { lazy, Suspense, useEffect, useState } from 'react'\nimport { useParams, useRouteMatch,useLocation,useHistory } from 'react-router-dom'\nimport { fetchId,fetchCast,fetchReviews } from '../services/apiFetch'\nimport { Link, Route } from 'react-router-dom'\nimport s from './Start.module.css'\n\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport { Rings } from  'react-loader-spinner'\n\nconst Cast = lazy(() => import('../components/cast/Cast'))\nconst Reviews = lazy(() => import('../components/reviews/Reviews'))\n\n\n\nconst MovieDetailsPage = () => {\n  const history = useHistory();\n  const location = useLocation();\n  const {movieId} = useParams()\n  const [film, setFilm] = useState(null);\n  const [cast, setCast] = useState(null);\n  const [reviews, setReviews] = useState(null)\n\n  const BASE_URL_IMG = 'https://image.tmdb.org/t/p/w300';\n  const {url} = useRouteMatch()\n\n\n  useEffect(() => {\n    fetchId(movieId).then(data => setFilm(data)).catch(error => \"error\")\n  },[movieId])\n  \n  useEffect(() => {\n    fetchCast(movieId).then(data => setCast(data.cast)).catch(error => \"error\")\n  }, [movieId])\n\n   useEffect(() => {\n    fetchReviews(movieId).then(data => setReviews(data.results)).catch(error => \"error\")\n  }, [movieId])\n  \n  \n   const handleGoBack = () => {\n    // history.push(location.state.from);\n    // history.goBack();\n    // history.go(-3);\n     \n     \n     history.push(location?.state?.from ?? '/')\n    \n  \n   };\n  \n\n  \n  return film? (\n    <>\n    <button className={s.buttonBack} type=\"button\" onClick={handleGoBack}>\n      &#8656; GoBack\n      </button>\n\n    <div className={s.filmWrap}>\n        <img className={s.filmImg} width=\"250\" src={BASE_URL_IMG + film.poster_path} alt={film.original_title}/>\n      <ul className={s.filmOverview}>\n          <li><h2 className={s.filmTitleOverview}>{film.original_title}</h2></li>\n          <hr/>\n          <li>\n          <p className={s.scoreTitle}>User Score:{' '}\n        <span>{Math.round((film.vote_average / 10) * 100)}%</span>\n          </p>\n          </li>\n          <hr/>\n          <li><h3 className={s.overviewTitle}>Overview</h3></li>\n          \n          <li className={s.overviewText}>{film.overview}</li>\n          <hr/>\n          <li><h4 className={s.genresTitle}>Genres</h4></li>\n          \n          {film.genres.map(({id,name},index) => {\n            return <li className={s.textGenres }key={id}>\n              {` - ${name}`}\n            </li>\n          })}\n          <hr/>\n        </ul>\n      </div > \n      <h4 className={s.aditionalTitle}>Aditional information</h4>\n      <div className={s.aditionalWrap}>\n        \n        <Link className={s.castTitle} to={{\n          pathname: `${url}/cast`,\n          state: { from: location?.state?.from ?? '/' },\n        }}>Cast</Link>\n        <Link className={s.reviewsTitle} to={{\n          pathname: `${url}/reviews`,\n          state: { from: location?.state?.from ?? '/' },\n        }}>Reviews</Link>\n        <Suspense fallback={<Rings\n        height=\"250\"\n        width=\"250\"\n        color='rgb(44, 172, 97)'\n        ariaLabel='loading'\n      />}>\n        <Route path={url + \"/cast\"}>\n          <Cast cast={cast}/>\n        </Route>\n        <Route path={url + \"/reviews\"}>\n          <Reviews reviews={reviews}/>\n         </Route>\n        </Suspense>\n      </div>\n      </>\n  ): null\n}\n\nexport default MovieDetailsPage"],"sourceRoot":""}